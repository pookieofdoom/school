/*CPE 464 
   Anthony Dinh
   rcopy.c
*/

#include <stdio.h>
#include <stdlib.h>
#include <string.h>

#include "cpe464.h"

typedef enum State STATE;

enum State
{
   START, DONE, FILENAME, SEND_DATE, WAIT_ON_ACK, TIMEOUT_ON_ACK
};

void check_args(int argc, char **argv);

int main (int argc, char **argv)
{
   check_args(argc, argv);  
   sendErr_init(atof(argv[4]), DROP_ON, FLIP_OFF, DEBUG_ON, RSEED_ON);
   return 0;

}


void check_args(int argc, char **argv)
{
   if (argc != 8)
   {
      printf("Usage %s local-file romate-file buffer-size error-percent\
       window-size hostname port\n", argv[0]);
       exit(-1);
   }
   
   if (strlen(argv[1]) > 1000)
   {
      printf("local filename too long, needs to be less than 1000 and\
       is %zd\n", strlen(argv[1]));
       exit(-1);
   }
   
   if (strlen(argv[2]) > 1000)
   {
      printf("remote filename too long, needs to be les than 1000 and\
       is %zd\n", strlen(argv[2]));
       exit(-1);
   }
   
   if (atoi(argv[3]) < 400 || atoi(argv[3]) > 1400)
   {
      printf("Buffer size needs to be between 400 and 1400 and is:\
       %d\n", atoi(argv[3]));
       exit(-1);
   } 
   if (atof(argv[4]) < 0 || atof(argv[4]) >= 1)
   {
      printf("Error rate needs to be between 0 and less than 1 and is:\
       %f\n", atof(argv[4]));
       exit(-1);
   }
   // need one for window size
   

}
